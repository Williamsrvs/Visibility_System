<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pedido Certo - Cat√°logo Digital</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
</head>

<body>
    <header class="main-header">
        <div class="button-container">
            <a href="/login" class="login-button">üè† Lojista</a>
        </div>
        <div></div> <!-- Spacer -->
    </header>

    <section class="intro">
        <h2>Bem-vindo ao Pedido Certo!</h2>
        <p>Fa√ßa seu pedido de forma r√°pida e pr√°tica diretamente pelo nosso cat√°logo.</p>
        <h2>üïú Ter√ßa a Domingo: 18:00h √†s 23:59h</h2>
        <h2>üìû (82) 98109-0042</h2>
    </section>

    <div class="select-box">
        <label for="grupo-select">Filtrar por Categoria</label>
        <select id="grupo-select" onchange="location = this.value;">
            <option value="/">Todas as Categorias</option>
            {% for subgrupo in subgrupos %}
                <option value="/subgrupo/{{ subgrupo.subgrupo }}" {% if subgrupos_selecionado == subgrupo.subgrupo %}selected{% endif %}>{{ subgrupo.subgrupo }}</option>
            {% endfor %}
        </select>
    </div>

    <nav class="nav-tabs">
        <ul class="tabs-list">
            <li class="tab-item"><a href="/">üõñ In√≠cio</a></li>
            <li class="tab-item"><a href="/contato">üí¨ Fale Conosco</a></li>
            <li class="tab-item"><a href="/pesquisa" target="_blank">üì£ Pesquisa</a></li>
            <li class="tab-item"><a href="#" onclick="compartilharPagina()">‚úÖ Compartilhar</a></li>
        </ul>   
    </nav>

    <main class="main-content">
        <section class="products-grid">
            {% if produtos %}
                {% for p in produtos %}
                    <div class="product-card">
                        <div class="product-image">
                            {% if p.imagem_url %}
                                <img src="data:image/jpeg;base64,{{ p.imagem_url|b64encode }}" alt="{{ p.nome_prod }}">
                            {% else %}
                                <img src="https://images.unsplash.com/photo-1546069901-ba9599a7e63c?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=60" alt="Sem imagem">
                            {% endif %}
                        </div>
                        <div class="product-info">
                            <h3>{{ p.nome_prod }}</h3>
                            <div class="divider"></div>
                            <p><strong>Descri√ß√£o:</strong> {{ p.descricao or 'Sem descri√ß√£o dispon√≠vel.' }}</p>
                            <p><strong>Categoria:</strong> {{ p.subgrupo }}</p>
                            {% if p.status_promocao and p.status_promocao != 'N√£o' %}
                                <p style="color: #e63946; font-weight: 700;">üî• {{ p.status_promocao }}</p>
                            {% endif %}
                            
                            <div class="product-price">R$ {{ "%.2f"|format(p.valor|float) }}</div>

                            <div class="order-btn-container">
                                <a href="/pedidos_cliente">üõí Fazer Pedido</a>
                            </div>
                        </div>  
                    </div>
                {% endfor %}
            {% else %}
                <p class="no-products">Nenhum produto encontrado nesta categoria.</p>
            {% endif %}
        </section>
    </main>

    <footer class="footer">
        <p>&copy; 2025 Date Analytics. Todos os direitos reservados.</p>
    </footer>

    <nav class="nav-tabs">
        <ul class="tabs-list">
            <li class="tab-item"><a href="/">üõñ In√≠cio</a></li>
            <li class="tab-item"><a href="/contato">üí¨ Fale Conosco</a></li>
            <li class="tab-item"><a href="/pesquisa" target="_blank">üì£ Pesquisa</a></li>
            <li class="tab-item"><a href="#" onclick="compartilharPagina()">‚úÖ Compartilhar</a></li>
        </ul>   
    </nav>

    <script>
        async function compartilharPagina() {
            try {
                const url = window.location.href;
                const title = document.title;
                
                if (navigator.share) {
                    await navigator.share({
                        title: title,
                        text: 'Confira nosso card√°pio digital!',
                        url: url
                    });
                } else {
                    const tempInput = document.createElement('input');
                    tempInput.value = url;
                    document.body.appendChild(tempInput);
                    tempInput.select();
                    document.execCommand('copy');
                    document.body.removeChild(tempInput);
                    alert('Link copiado para a √°rea de transfer√™ncia!');
                }
            } catch (error) {
                console.error('Erro ao compartilhar:', error);
            }
        }
    </script>
</body>
</html>
